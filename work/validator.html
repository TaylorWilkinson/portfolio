<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Form Validator - Taylor Wilkinson - Portfolio</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<!-- favicons -->
	<link rel="apple-touch-icon" sizes="60x60" href="img/favicon/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-16x16.png">
	<link rel="manifest" href="img/favicon/site.webmanifest">
	<link rel="mask-icon" href="img/favicon/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#2d89ef">
	<meta name="theme-color" content="#ffffff">

	<!-- normalize -->
	<link rel="stylesheet" href="../css/normalize.min.css">
	<!-- Bootstrap -->
	<link rel="stylesheet" href="../css/bootstrap.css">
	<!-- stylesheets -->
	<link rel="stylesheet" href="../css/main.css">
	<link rel="stylesheet" href="../css/flexbox.css">

	<!-- fonts -->
	<!-- Montserrat -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,500" rel="stylesheet">
	<!-- Roboto -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
</head>
<body>
	<nav class="navigation navbar navbar-light bg-white navbar-expand-sm" id="navbar-bg">
		<div class="container-fluid">
			<a href="../index.html" class="nav-item nav-link active navbar-brand" id="navLogo">
				<img id="tw-icon" src="../img/icon.png" alt="Taylor Wilkinson portfolio icon">
			</a><!-- inital icon -->
			<a href="../index.html" class="nav-item nav-link active navbar-brand" id="navNameText">
				<p id="navTitle">taylor wilkinson</p>
				<p id="navSubtitle">developer + designer</p>
			</a><!-- inital icon -->

			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#toggleNavBar" aria-controls="toggleNavBar" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button> <!-- hamburger button -->

			<div class="collapse navbar-collapse" id="toggleNavBar">
				<div class="navbar-nav ml-auto">
					<a href="../index.html" class="nav-item nav-link">PROJECTS</a>
					<a href="Resume_TaylorWilkinson.pdf" target="_blank" class="nav-item nav-link">RESUME</a>
					<a href="../about.html" class="nav-item nav-link">ABOUT</a>
				</div>
			</div> <!-- Collapse -->
		</div>
	</nav><!-- Navigation bar -->


	<div class="container body-copy">
		<div class="row full-row">
			<div class="col-sm-12 col-sm-6 col-md-6 mx-auto no-side-padding">
				<figure>
					<img src="../img/validator-AEM.png" class="img-fluid" alt="Screen capture of validator returning an error to user in AEM">
				</figure>
			</div>
		</div>
		<div class="row full-row">
			<div class="col-lg-6 no-side-padding">
				<h1>BlackBerry Form Validator</h1>
			</div>
		</div> <!-- title section -->


		<div class="row full-row">
			<div class="col-lg-4 no-side-padding">
				<h2>team</h2>
				<p>Individual project, while working for BlackBerry</p>
			</div>
			<div class="col-lg-4 no-side-padding">
				<h2>tools</h2>
				<p>Eclipse, JavaScript, XML, RegEx, Git</p>
			</div>
			<div class="col-lg-4 no-side-padding">
				<h2>my role</h2>
				<p>Web Developer</p>
			</div>
		</div> <!-- close project summary -->

		<div class="row">
			<div class="col-lg-6">
				<h2>brief</h2>
				<p>After seeking additional work and challenge during my work term, I was assigned this task by one of the Web Applications Developers on the Digital Marketing team. I needed to restrict the acceptable input characters for the name field of multiple components on BlackBerry's authoring site. June to August 2018.</p>
			</div>
		</div> <!-- end of section :: brief -->

		<div class="row">
			<div class="col-lg-6">
				<h2>research</h2>
				<p>When I was given this job, there was no clear or required deadline, but it was clear that it was an important issue to address. At that time, if someone included a special character in the name of a form component, the form's name would be unreadable to the back-end software. This room for error posed a major issue to the Marketing department, who uses these forms for a variety of purposes including lead generation.</p>
				<p>Since this was my first time writing a validator and I had only basic JavaScript experience prior, I found some documents and tutorials online to refresh myself. I also read through documentation on Adobe Experience Manager (AEM), the content management software that was used. I also taught myself about regular expressions (RegEx) at the suggestion of another developer who thought it may be useful.</p>
			</div>
			<div class="col-lg-6">
				<figure>
					<img src="../img/validator_AEMDocumentationCropped.png"  alt="A screen capture of Screencapture of AEM's documentation on TouchUI dialog values, specifically on writing JavaScript validation code" >
					<figcaption>
						A screen capture of Screencapture of AEM's documentation on TouchUI dialog values, specifically on writing JavaScript validation code. July 2018.
					</figcaption>
				</figure>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6">
				<h2>coding</h2>
				<p>Once I had my own local host set up, I would work on writing code for the form validator whenever I had spare time around projects of higher priority. To begin with, I wrote smaller functions to test different ideas and to practice the various RegEx expressions.</p>
				<p>After a few iterations, I had written a JavaScript function that worked as intended and provided an error message in plain language to indicate the issue and help the user recover quickly. After testing the function and ensuring it wouldn't negatively affect unrelated components, I got permission from the lead developer to push the code to the website's master branch and request that it go to production.</p>
			</div>
			<div class="col-lg-6">
				<pre>
					<code>
"use strict";

use(function () {
	//test function to determine RegExp and relevant properties
	//final goal: restrict the name field for form inputs to only allow letters, numbers, and dashes(-)

	var properties = granite.resource.properties,
	name = properties.name,
	regex = new RegExp("^[a-zA-Z0-9-_]*$"),
	noSpecialChar = regex.test(name);
	specialCharPresent = false;

	if(noSpecialChar == false){
		specialCharPresent = true;
	};

	return {
		name: name,
		noSpecialChar: noSpecialChar,
		specialCharPresent: specialCharPresent
	};
});
					</code>
				</pre>
				<p class="snippet">A test function used to determine RegEx and relevant properties. July 2018.</p>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6">
				<h2>implementation</h2>
				<p>Once my JavaScript function was pushed to production, it was found that the authoring website could not create forms correctly. As much as my very kind team assured me that it was likely not my code and probably something else, it ended up that it was definitely my code at the root of the issue. They reverted my push, and I was back to working on it again to figure out what was wrong.</p>
				<p>After more testing on my own and a pair programming session with one of the Web Applications developers, we found the issue: a line of code I had referred to from AEM's documentation conflicted with other plugins being used on the website. I was able to make the necessary edits to address the major crashing problem, while also taking the opportunity to clean up my code and add comments to allow the function to be edited easily in the future once my co-op term had ended.</p>
			</div>
			<div class="col-lg-6">
				<pre>
					<code>
/*
 Purpose: Restrict the name field for form inputs to only allow letters, numbers, dashes (-), and underscores (_)
 Based on AEM documentation for TouchUI Validation (https://helpx.adobe.com/experience-manager/using/creating-touchui-validate.html)
 Used for the following form components: "consent", "hidden", "options", "text"
*/

(function (document, $, ns) {
    "use strict";

    $(document).on("click", ".cq-dialog-submit", function (e) {
        e.stopPropagation();

        var $form = $(this).closest("form.foundation-form"),
        name = $form.find("[name='./name']").val(),
        campaign = $form.find("[name='./campaign']").val(),
        message, clazz = "coral-Button ",
        patterns = {regex: /^[a-zA-Z0-9-_]*$/};

        /* To verify that the component will only work for the desired components,
        determine the "action" path of the form and confirm the relevant path */
        var formActionPath = ($form[0]).action,
        consentActionPath = formActionPath.search("/consent"),
        hiddenActionPath = formActionPath.search("/hidden"),
        optionsActionPath = formActionPath.search("/options"),
        textActionPath = formActionPath.search("/text");

        /* If-statement uses regex to confirm that only desired characters are used, and checks the component's action path */
        if((!patterns.regex.test(name)) && ((consentActionPath != -1) || (hiddenActionPath != -1) || (optionsActionPath != -1) || (textActionPath != -1))){
        	e.preventDefault();

        	ns.author.ui.helpers.prompt({
        		title: Granite.I18n.get("Invalid Input"),
                message: "Please enter a name that only uses alphanumeric characters, dashes, or underscores. (A-Z, 0-9, \"-\", or \"_\")",
                type: "ERROR",
                actions: [{
                    id: "CANCEL",
                    text: "CANCEL"
                }],
                callback: function (actionId) {
                	if (actionId === "CANCEL") {
                	}
                }
        	});
        }
    });
})(document, Granite.$, Granite);
					</code>
				</pre>
				<p class="snippet">The final JavaScript code used in the form validator. August 2018.</p>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-6">
				<h2>reflections</h2>
				<p>After chipping away at this project, before the end of my internship I was able to provide and implement code for BlackBerry's authoring site. While it wasn't a very complex job, it pushed me out of my comfort zone and showed that I'm willing to work on the fly. While it didn't work flawlessly when it was first pushed, the problems I faced emphasized that iteration needs to happen in one's own work, as code will rarely work perfectly the first time around.</p>
				<p>Also, I'm aware that I only got this job assigned to me because I asked for it. Because I approached the developers on my team and made it clear that I wanted to do more code-related work than what I was given day-to-day, I got the opportunity to practice, learn new skills, and grow as a developer.</p>
			</div>
			<div class="col-lg-6">
				<figure>
					<img src="../img/validator-in-use.png" alt="A screen capture of the validator being used on the AEM authoring site">
					<figcaption>
						A screen capture of the validator being used on the AEM authoring site. August 2018.
					</figcaption>
				</figure>
			</div>
		</div>
	</div>
	<!-- landing page content TBD -->

	<button onclick="topFunction()" id="backToTopButton" title="Go to top">Back To Top</button> <!-- Button to scroll back to top because, that's too much work! -->

	<footer class="footer" id="portfolio-footer">
		<div class="container">
			<div class="row">
				<div class="col">
					<a href="https://github.com/TaylorWilkinson/" target="_blank">
						<img class="icon" src="img/github-logo.png" alt="GitHub logo">
					</a>
					<a href="https://www.linkedin.com/in/taylorjwilkinson/" target="_blank">
						<img class="icon" src="img/linkedin-logo.png" alt="LinkedIn logo">
					</a>
					<a href="mailto:tjwilkinsonn@gmail.com">
						<img class="icon" src="img/email-logo.png" alt="Email envelope icon">
					</a>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<p id="footer-copy">designed & hand coded with love and care</p>
			</div>
		</div>
	</footer> <!-- footer -->

  	<script src="../js/jquery.slim.min.js"></script>
  	<script src="../js/popper.min.js"></script>
  	<script src="../js/bootstrap.min.js"></script>
  	<script src="../js/scrollButton.js"></script>
</body>
</html>
